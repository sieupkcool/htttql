<div class="sidebar">
  <div class="user-info">
    <img
      src="https://i.pinimg.com/736x/8f/1c/a2/8f1ca2029e2efceebd22fa05cca423d7.jpg"
      class="rounded-circle"
      alt="Avatar"
    />
    <h5 id="sidebar-username"></h5>
    <div id="sidebar-role" class="role-label"></div>
    <div class="status">â— Online</div>
  </div>
  <a href="/index">ğŸ  Trang chá»§</a>
  <a href="/profile">ğŸ‘¤ ThÃ´ng tin cÃ¡ nhÃ¢n</a>
  <a href="#" id="sidebar-statistics-link" class="role-all">ğŸ“Š Thá»‘ng kÃª</a>
  <a href="/bomon" class="role-truongkhoa">ğŸ“š Bá»™ mÃ´n</a>
  <a href="/assignment" class="role-truongbomon">ğŸ¤ PhÃ¢n cÃ´ng</a>
  <a href="/progress" class="role-truongbomon">âœ… Duyá»‡t cÃ´ng viá»‡c</a>
  <a href="/create_exam" class="role-truongbomon">ğŸ“ Táº¡o Ä‘á» thi</a>
  <a href="/exam_list" class="role-truongbomon">ğŸ“‹ Quáº£n lÃ½ Ä‘á» thi</a>
  <a href="/question_list" class="role-truongbomon">â“ Quáº£n lÃ½ cÃ¢u há»i</a>

  <a href="/assigned_tasks" class="role-giangvien"
    >ğŸ“ CÃ´ng viá»‡c Ä‘Æ°á»£c phÃ¢n cÃ´ng</a
  >
  <a href="/completion_stats" class="role-truongbomon role-truongkhoa"
    >ğŸ“ˆ Tá»· lá»‡ hoÃ n thÃ nh</a
  >
  <a href="/users" class="role-truongkhoa">ğŸ‘¥ Quáº£n lÃ½ giáº£ng viÃªn</a>
  <a href="/login" id="logout-link">ğŸšª ÄÄƒng xuáº¥t</a>
</div>
<script>
  const role = localStorage.getItem("role");
  const hovaten = localStorage.getItem("hovaten");

  // áº¨n/hiá»‡n menu theo role
  document.querySelectorAll(".sidebar a").forEach((a) => {
    if (
      (a.classList.contains("role-truongkhoa") && role !== "TrÆ°á»Ÿng khoa") ||
      (a.classList.contains("role-truongbomon") && role !== "TrÆ°á»Ÿng bá»™ mÃ´n") ||
      (a.classList.contains("role-giangvien") && role !== "Giáº£ng viÃªn")
    ) {
      a.style.display = "none";
    }
  });

  // ÄÄƒng xuáº¥t
  document.getElementById("logout-link").onclick = function () {
    localStorage.clear();
  };

  // Hiá»ƒn thá»‹ há» tÃªn náº¿u cÃ³
  if (hovaten) document.getElementById("sidebar-username").innerText = hovaten;
  // Hiá»ƒn thá»‹ vai trÃ²
  if (role) document.getElementById("sidebar-role").innerText = role;
  // Äiá»u hÆ°á»›ng "Thá»‘ng kÃª" theo vai trÃ²
  document.getElementById("sidebar-statistics-link").onclick = function (e) {
    e.preventDefault();
    if (role === "TrÆ°á»Ÿng bá»™ mÃ´n") {
      window.location.href = "/completion_stats";
    } else if (role === "TrÆ°á»Ÿng khoa") {
      window.location.href = "/statistics";
    } else {
      window.location.href = "/statistics";
    }
  };
</script>
